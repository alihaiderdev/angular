{{ bookingForm.value | json }}
{{ { pristine: bookingForm.pristine } | json }}
{{ { dirty: bookingForm.dirty } | json }}
{{ { invalid: bookingForm.invalid } | json }}
{{ { valid: bookingForm.valid } | json }}

<button mat-raised-button color="primary" type="button" (click)="addPassport()">
  Add Passport
</button>
<button
  mat-raised-button
  color="accent"
  type="button"
  (click)="removePassport()"
>
  Remove Passport
</button>

<form
  [formGroup]="bookingForm"
  class="example-form mt-4 mx-auto"
  (ngSubmit)="addBooking()"
>
  <mat-form-field
    class="example-full-width"
    appearance="fill"
    *ngIf="bookingForm.get('passport')"
  >
    <mat-label>Passport</mat-label>
    <input
      type="text"
      matInput
      formControlName="passport"
      placeholder="Enter your passport"
    />
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Room ID</mat-label>
    <input
      type="text"
      matInput
      formControlName="roomId"
      placeholder="Enter your room id"
    />
    <!-- <mat-error
      *ngIf="
        emailFormControl.hasError('email') &&
        !emailFormControl.hasError('required')
      "
    >
      Please enter a valid email address
    </mat-error>
    <mat-error *ngIf="emailFormControl.hasError('required')">
      Email is <strong>required</strong>
    </mat-error> -->
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Booking Amount</mat-label>
    <input
      type="number"
      matInput
      formControlName="bookingAmount"
      placeholder="Enter your booking amount"
    />
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Booking Date</mat-label>
    <input
      matInput
      [matDatepicker]="bookingDate"
      formControlName="bookingDate"
    />
    <mat-datepicker-toggle
      matSuffix
      [for]="bookingDate"
    ></mat-datepicker-toggle>
    <mat-datepicker #bookingDate></mat-datepicker>
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Mobile Number</mat-label>
    <input
      type="tel"
      matInput
      formControlName="mobileNumber"
      placeholder="Enter your mobile number"
    />
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Guest Name</mat-label>
    <input
      type="text"
      matInput
      formControlName="guestName"
      placeholder="Enter your guest name"
    />
    <!-- {{ bookingForm.errors | json }} -->
    {{ bookingForm.get("guestName")?.errors | json }}
    <mat-error *ngIf="bookingForm.get('guestName')?.hasError('minlength')">
      Guest name should be minimum 3 characters long!
    </mat-error>
  </mat-form-field>

  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Guest Email</mat-label>
    <input
      type="email"
      matInput
      formControlName="guestEmail"
      placeholder="Enter your guest email"
    />
    <mat-error
      *ngIf="
        bookingForm.get('guestEmail')?.hasError('email') &&
        !bookingForm.get('guestEmail')?.hasError('required')
      "
    >
      Please enter a valid email address
    </mat-error>
    <mat-error *ngIf="bookingForm.get('guestEmail')?.hasError('required')">
      Email is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Check In Date</mat-label>
    <input
      matInput
      [matDatepicker]="checkInDate"
      formControlName="checkInDate"
    />
    <mat-datepicker-toggle
      matSuffix
      [for]="checkInDate"
    ></mat-datepicker-toggle>
    <mat-datepicker #checkInDate></mat-datepicker>
  </mat-form-field>
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Check Out Date</mat-label>
    <input
      matInput
      [matDatepicker]="checkOutDate"
      formControlName="checkOutDate"
    />
    <mat-datepicker-toggle
      matSuffix
      [for]="checkOutDate"
    ></mat-datepicker-toggle>
    <mat-datepicker #checkOutDate></mat-datepicker>
    {{ bookingForm.get("checkOutDate")?.errors | json }}
  </mat-form-field>
  <!-- <div formGroupName="address"> -->
  <!-- if the form is in the same form then we use formGroupName -->
  <mat-accordion formGroupName="address" class="example-headers-align">
    <mat-expansion-panel class="mb-4">
      <mat-expansion-panel-header>
        <mat-panel-title>Address </mat-panel-title>
        <!-- <mat-panel-description>
              Enter your address
              <mat-icon>account_circle</mat-icon>
            </mat-panel-description> -->
      </mat-expansion-panel-header>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Address Line 1</mat-label>
        <input
          type="text"
          matInput
          formControlName="addressLine1"
          placeholder="Enter your address line 1"
        />
        <mat-error
          *ngIf="bookingForm.get('address.addressLine1')?.hasError('required')"
        >
          Address line 1 is <strong>required</strong>!
        </mat-error>
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Address Line 2</mat-label>
        <input
          type="text"
          matInput
          formControlName="addressLine2"
          placeholder="Enter your address line 2"
        />
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>City</mat-label>
        <input
          type="text"
          matInput
          formControlName="city"
          placeholder="Enter your city"
        />
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>State</mat-label>
        <input
          type="text"
          matInput
          formControlName="state"
          placeholder="Enter your state"
        />
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Country</mat-label>
        <input
          type="text"
          matInput
          formControlName="country"
          placeholder="Enter your country"
        />
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Zip Code</mat-label>
        <input
          type="text"
          matInput
          formControlName="zipCode"
          placeholder="Enter your zip code"
        />
      </mat-form-field>
    </mat-expansion-panel>
  </mat-accordion>
  <!-- </div> -->
  <button
    mat-raised-button
    color="primary"
    class="example-full-width mb-4"
    type="button"
    (click)="addGuest()"
  >
    Add Guest
  </button>
  <div *ngIf="guests.length > 0" formArrayName="guests">
    <mat-expansion-panel class="mb-4" expanded="true">
      <mat-expansion-panel-header>
        <mat-panel-title>Guests </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngFor="let guest of guests.controls; let i = index">
        <!-- formGroupName should be unique -->
        <!-- <div
          [formGroupName]="i"
          class="rounded-lg mb-4"
          [class]="i % 2 === 0 ? 'bg-cyan-200' : 'bg-violet-200'"
        >
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Name</mat-label>
            <input
              type="text"
              matInput
              formControlName="name"
              placeholder="Enter your name"
            />
          </mat-form-field>
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Age</mat-label>
            <input
              type="number"
              matInput
              formControlName="age"
              placeholder="Enter your age"
            />
          </mat-form-field>
        </div> -->
        <mat-accordion [formGroupName]="i" class="example-headers-align">
          <mat-expansion-panel class="my-4" expanded="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Guest {{ i + 1 }} </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Name</mat-label>
              <input
                type="text"
                matInput
                formControlName="name"
                placeholder="Enter your name"
              />
              <mat-error
                *ngIf="
                  bookingForm.get(['guests', i, 'name'])?.hasError('required')
                "
              >
                Guest {{ i + 1 }} name is required!
              </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Age</mat-label>
              <input
                type="number"
                matInput
                formControlName="age"
                placeholder="Enter your age"
              />
            </mat-form-field>
          </mat-expansion-panel>
          <button
            mat-raised-button
            color="warn"
            class="example-full-width"
            (click)="deleteGuest(i)"
          >
            Delete Guest {{ i + 1 }}
          </button>
        </mat-accordion>
      </ng-container>
    </mat-expansion-panel>
  </div>
  <mat-checkbox class="example-margin" formControlName="tnc" color="primary"
    >Terms And Conditions</mat-checkbox
  >
  <button
    mat-raised-button
    color="primary"
    class="example-full-width"
    [disabled]="bookingForm.invalid"
  >
    Book Room
  </button>
</form>
